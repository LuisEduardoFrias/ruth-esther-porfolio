---
import '@/styles/global.css';
import Language from '@/components/Language.astro';
import Theme from '@/components/Theme.astro';

interface Props {
  title?: string;
  name?: string;
  description?: string;
}

const {
  title = "Portafolio de Ruth Esther",
  name = "Ruth Esther - Portafolio",
  image_url= "/images/profile-resize.webp",
  description = "Portafolio profesional de Ruth Esther, Data Analyst.",
} = Astro.props;
---

<!Doctype html>
<html lang="es">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      
      <meta property="og:type" content="website" />
      <meta property="og:title" content={title} />
      <meta property="og:site_name" content={name} />
      <meta property="og:description" content={description} />
      <meta property="og:image" content={image_url} />
      <meta property="og:locale" content="es_ES" />
    <!--  <meta property="og:url" content={page_url} /> -->
      <meta property="og:image:width" content="1200" />
      <meta property="og:image:height" content="630" />
      
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:title" content={title} />
      <meta name="twitter:description" content={description} />
      <meta name="twitter:image" content={image_url} />
      <meta name="twitter:site" content="@yourtwitterhandle" /> 
      <meta name="twitter:creator" content="@yourtwitterhandle" /> 
      
      <meta name="description" content={description} />
      <title>{title}</title>
   
      <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
      <link rel="preload" href={image_url}  as="image" type="image/webp" crossorigin="anonymous" />
      <link rel="preload" href="/fonts/YourFontName.woff2" as="font" type="font/woff2" crossorigin="anonymous"/>
   
   </head>
   
   <body class="min-h-screen text-tm-text">
      <div id="head" class="z-50 transition-all duration-1000 ease-in-ou w-full flex justify-between items-center p-2" >
         <label id="label-name" class="opacity-0 transition-opacity duration-1000 ease-in-out text-xl sm:text-4xl lg:text-5xl font-extrabold
         text-tm-pr mb-1 leading-tight">
            Ruth Esther Baéz Órtiz
         </label>
         <div class="flex gap-3">
            <Theme />
            <Language />
         </div>
      </div>
      <slot />
   </body>
   
</html>

<style>
   #label-name {
      /*text-shadow:1px 1px 1px var(--tm-bg);*/
   }
</style>

<script>
   import { $ } from '@/lib/dom-selector'

   const $header = $('#head');
   const $labelName = $('#label-name');

   window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      if ($header && $labelName) {
         if (scrollTop > 0) {
            if (scrollTop > 190) 
               $labelName.classList.remove("opacity-0");
            else
               $labelName.classList.add("opacity-0");
            
            $header.classList.add('fixed');
            $header.classList.add('bg-tm-translucent');
            $header.classList.add('backdrop-blur-md');
         } else {
            $header.classList.remove('fixed');
            $header.classList.remove('bg-tm-translucent');
         }
      }
   });
   
   document.addEventListener('DOMContentLoaded', () => {
      const langSwitcher = $('#lang-switcher');

      async function loadTranslations(lang: string) {
         try {
            const response = await import(`../lang/${lang}.json`);
            
            if (!response.default) {
               throw new Error(`Error al cargar las traducciones para "${lang}".`);
            }

            return response.default;
            
         } catch (error) {
            console.error(error);
            return {};
         }
      }

      async function applyTranslations() {
         const currentLang = localStorage.getItem('lang') || langSwitcher.dataset.currentLang || 'en';
         const translations = await loadTranslations(currentLang);
         
         document.querySelectorAll('[data-key]').forEach(element => {
            const key = element.dataset.key;
            
            if (translations[key]) {
               element.textContent = translations[key];
            }
         });

         document.documentElement.lang = currentLang;
      }

      langSwitcher.addEventListener('change', applyTranslations);

      applyTranslations();
   });

</script>

<!--
/////////
/////////
/////////

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Portfolio</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <nav>
            <button id="lang-switcher" data-current-lang="es">Change to English</button>
        </nav>
    </header>

    <section id="hero">
        <h1 data-key="hero_title">Hola, soy [Tu Nombre]</h1>
        <p data-key="hero_subtitle">Desarrollador Web y Diseñador</p>
    </section>

    <section id="about">
        <h2 data-key="about_title">Sobre Mí</h2>
        <p data-key="about_paragraph1">Soy un desarrollador web apasionado con experiencia en...</p>
        <p data-key="about_paragraph2">Mis habilidades incluyen HTML, CSS, JavaScript...</p>
    </section>

    <section id="projects">
        <h2 data-key="projects_title">Mis Proyectos</h2>
        <div class="project">
            <h3 data-key="project1_name">Proyecto Alfa</h3>
            <p data-key="project1_description">Una aplicación web para gestionar tareas.</p>
        </div>
        </section>

    <section id="contact">
        <h2 data-key="contact_title">Contáctame</h2>
        <p><span data-key="contact_email">Correo Electrónico</span>: tu_email@ejemplo.com</p>
        <button data-key="contact_message">Enviar Mensaje</button>
    </section>

    <script src="js/main.js"></script>
</body>
</html>
-->